image: maven:3.8.3-openjdk-16-slim

cache:
  paths:
    - .m2/repository

stages:
  - build
  - check_style
  - test
  - verify

build:
  stage: build
  script:
    - cd wishList && mvn install -B -DskipTests
    - mvn clean compile

check_style:
  stage: check_style
  script:
    - mvn checkstyle:checkstyle
    - cat checkstyle-result.xml

verify:
  stage: verify
  script:
    - mvn verify -DskipUiTests=true
    - cat core/target/site/jacoco/index.html
    artifacts:
      paths:
        - core/target/site/jacoco/index.html

test:
  stage: test
  script:
    - cd wishList && mvn test -DskipUiTests=true
